package com.example.juncookapp.logic.JunCookMediaimport android.content.Contextimport android.database.MergeCursorimport android.provider.MediaStoreimport android.util.Logimport java.io.Filefun getAllMediaFilesOnDevice(context: Context): List<File> {    val files = ArrayList<File>()    try {        val columns = arrayOf(            MediaStore.Images.Media.DATA,            MediaStore.Images.Media.DATE_ADDED,            MediaStore.Images.Media.BUCKET_ID,            MediaStore.Images.Media.BUCKET_DISPLAY_NAME        )        val cursor = MergeCursor(            arrayOf(                context.contentResolver.query(                    MediaStore.Images.Media.EXTERNAL_CONTENT_URI,                    columns,                    null,                    null,                    null                ),                context.contentResolver.query(                    MediaStore.Video.Media.EXTERNAL_CONTENT_URI,                    columns,                    null,                    null,                    null                ),                context.contentResolver.query(                    MediaStore.Images.Media.INTERNAL_CONTENT_URI,                    columns,                    null,                    null,                    null                ),                context.contentResolver.query(                    MediaStore.Video.Media.INTERNAL_CONTENT_URI,                    columns,                    null,                    null,                    null                )            )        )        cursor.moveToFirst()        files.clear()        while (!cursor.isAfterLast) {            var path = cursor.getString(cursor.getColumnIndex(MediaStore.Images.Media.DATA))            val lastPoint = path.lastIndexOf(".")            path = path.substring(0, lastPoint) + path.substring(lastPoint).toLowerCase()            files.add(File(path))            cursor.moveToNext()        }        cursor.close()    } catch (e: Exception) {        e.printStackTrace()    }    Log.d("JunCookMedia", "List of files: $files")    return files}